import{A as w,_ as S,e as c}from"../../index-P5YTNo6V.js";import{j as d,b as L,r as M,w as V,L as x,M as _,Q as j,V as r,u as F,F as U,a1 as z,Y as A,a2 as P,a3 as T,a4 as k}from"./vue-chunks-DrvJJrR0.js";import{U as B}from"./index-0mvf2oPh.js";var H={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};const N=H;function g(a){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?Object(arguments[o]):{},e=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(l).filter(function(s){return Object.getOwnPropertyDescriptor(l,s).enumerable}))),e.forEach(function(s){D(a,s,l[s])})}return a}function D(a,o,l){return o in a?Object.defineProperty(a,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[o]=l,a}var m=function(o,l){var e=g({},o,l.attrs);return d(w,g({},e,{icon:N}),null)};m.displayName="InboxOutlined";m.inheritAttrs=!1;const E=m,f=a=>(T("data-v-b4a65930"),a=a(),k(),a),$={class:"ant-upload-drag-icon"},R=f(()=>r("div",{class:"ant-upload-text"},"点击或将文件拖拽到这里上传",-1)),W={class:"ant-upload-hint"},Q=f(()=>r("p",null,"一次只能上传一个文档，单个文件不超过100M",-1)),Y=f(()=>r("span",null,"支持文件类型：",-1)),q={__name:"upload-input",props:{value:{type:Array,default:()=>[]},maxCount:{type:Number,default:1}},emits:["change","update:value"],setup(a,{emit:o}){const l=o,e=a,s=["pdf","docx","txt","md","xlsx","csv","html"],b=L(()=>s.map(t=>`.${t}`).join(",")),n=M([]);V(()=>e.value,t=>{n.value=t},{immediate:!0});let u=null;const C=()=>{if(n.value.length>=e.maxCount)return c.error("一次最多上传"+e.maxCount+"个文件")},v=()=>{n.value.length>e.maxCount&&c.error("一次最多上传"+e.maxCount+"个文件");let t=[...n.value];l("change",t),l("update:value",t)},O=t=>{I(t),v()},I=t=>{for(let i=0;i<n.value.length;i++)if(n.value[i].uid===t.uid){n.value.splice(i,1);break}},y=t=>{const i=t.name.split(".").pop();return s.includes(i.toLowerCase())?t.size/1024/1024<100?(n.value=[...n.value||[],t],n.value.length>e.maxCount&&(n.value=n.value.splice(0,e.maxCount)),u&&clearTimeout(u),u=setTimeout(()=>{v(),clearTimeout(u)},50),!1):(c.error("文件大小不能超过100M"),!1):(c.error("不支持的文件格式"),!1)};return(t,i)=>{const h=B;return x(),_("div",{class:P(["upload-input",{disabled:n.value.length>=e.maxCount}])},[d(h,{"file-list":n.value,name:"file",multiple:!0,"max-count":e.maxCount,accept:b.value,beforeUpload:y,onRemove:O,class:"ant-upload-drag"},{default:j(()=>[r("div",$,[d(F(E))]),R,r("div",W,[Q,r("p",null,[Y,(x(),_(U,null,z(s,p=>r("span",{class:"ant-upload-hint-ext",key:p},"."+A(p),1)),64))])])]),_:1},8,["file-list","max-count","accept"]),r("div",{class:"disabled-mask",onClick:C})],2)}}},Z=S(q,[["__scopeId","data-v-b4a65930"]]);export{Z as U};
