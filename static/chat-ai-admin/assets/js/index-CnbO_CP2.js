import{_ as qe}from"./empty-CzGZrENG.js";import{j as e,r as v,a0 as Z,w as Ue,A as X,L as u,M as k,Q as n,F as Q,a1 as H,P as V,V as s,Y as $,X as m,u as z,E as ue,U as De,G as de,a8 as le,a3 as _e,a4 as pe,b as Ee}from"./vue-chunks-DrvJJrR0.js";import{i as Ne,j as Re,k as Te,l as Pe,m as Ae,n as Ve,o as ze,p as Le,q as be,f as Be,r as Ye,s as Je,t as Qe}from"./index-Drsidg4b.js";import{A as Ke,_ as ee,e as Y,M as K,B as ke,E as ce,c as je}from"../../index-P5YTNo6V.js";import"./index-DbkTLXZJ.js";import{I as we}from"./Input-Dgd5v23J.js";import{_ as me,F as re}from"./index-BUTxM_ZP.js";import{Q as xe}from"./QuestionCircleOutlined-Dtch7f6L.js";import{_ as fe}from"./index-GBuEB8v_.js";import{_ as Oe}from"./index-C2gWNf-5.js";import{_ as Ce}from"./index-Bc7OgjxK.js";import{_ as Ge}from"./index-DdXykPaM.js";import"./index-BHxFUlgm.js";import{R as Me,_ as $e}from"./RadioButton-aF3UutsZ.js";import{R as He}from"./dayjs-B6COTrNc.js";import{a as he}from"./validate-8MtiUsxW.js";import{S as We,_ as Xe}from"./index-cbzy6J7k.js";import{_ as Ze,S as et}from"./SettingOutlined-CBCr9yu3.js";import{d as tt}from"./vuedraggable.umd-BZm2M5ml.js";import{_ as Fe}from"./index-BuUtNX0x.js";import{u as nt}from"./database-B_fHTszx.js";import{T as ot,_ as at}from"./index-CgF70E4H.js";import{S as lt}from"./index-CDg2rIxr.js";import{_ as rt,M as st}from"./index-CH9v5L6a.js";import"./index-DpfcpfQ0.js";import{D as it}from"./dropdown-7DbQfkaS.js";import{a as ut,_ as dt}from"./index-BdZgce9p.js";import{P as ye}from"./PlusOutlined-CDlgthEJ.js";import{D as ct}from"./DownOutlined-BHsv0Dlx.js";import"./dayjs-Bv4VEw_C.js";import"./axios-Cm0UX6qg.js";import"./qs-QntUJHOZ.js";import"./crypto-js-BpV8n4kc.js";import"./FormItemContext-C-6BWMej.js";import"./index-DuYANmfA.js";import"./Search-DbjjEMkL.js";import"./SearchOutlined-BsZdEpth.js";import"./inputProps-CVwJ66mj.js";import"./TextArea-2ujELiW_.js";import"./index-CCuYH0LT.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./Password-DoqQ5Cp-.js";import"./colors-CF1NjnDv.js";import"./responsiveObserve-BH6_flfv.js";import"./collapseMotion-DfZt1qrJ.js";import"./CheckOutlined-C_vTn6Wi.js";import"./shallowequal-CfnxU2uU.js";import"./move-DKHu4ARt.js";import"./slide-BQHNwZxO.js";import"./Dropdown-ZPlzQgPg.js";import"./useRefs-Bj34oM9A.js";import"./RightOutlined-DIZF9Vab.js";import"./LeftOutlined-BqmAHDBI.js";import"./index-DYXArsZx.js";var _t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};const pt=_t;function ge(c){for(var x=1;x<arguments.length;x++){var S=arguments[x]!=null?Object(arguments[x]):{},D=Object.keys(S);typeof Object.getOwnPropertySymbols=="function"&&(D=D.concat(Object.getOwnPropertySymbols(S).filter(function(F){return Object.getOwnPropertyDescriptor(S,F).enumerable}))),D.forEach(function(F){mt(c,F,S[F])})}return c}function mt(c,x,S){return x in c?Object.defineProperty(c,x,{value:S,enumerable:!0,configurable:!0,writable:!0}):c[x]=S,c}var ve=function(x,S){var D=ge({},x,S.attrs);return e(Ke,ge({},D,{icon:pt}),null)};ve.displayName="MinusCircleOutlined";ve.inheritAttrs=!1;const ft=ve,vt={class:"add-data-sheet"},ht={class:"field-name"},yt={__name:"add-data-modal",props:{column:{type:Array,default:()=>[]}},emits:"ok",setup(c,{expose:x,emit:S}){const D=v("添加数据"),I=Z().query,p=S,O=c;Ue(()=>O.column,w=>{r()});const C=v([]),r=()=>{let w=[];O.column.forEach(i=>{g[i.name]="",i.rules=[],i.required=="true"&&i.rules.push({required:!0,message:`请输入${i.name}`}),i.type=="number"&&i.rules.push({type:"number",message:`${i.name}必须为数字`}),i.type=="integer"&&i.rules.push({asyncValidator:L}),i.type=="boolean"&&(g[i.name]="false"),w.push({...i}),C.value=w})},L=(w,i)=>new Promise((d,_)=>i==""||Number.isInteger(+i)?d():_("请输入整数")),E=v(!1),g=X({form_id:I.form_id}),q=w=>{E.value=!0,U.value&&U.value.resetFields(),r(),g.id="",Object.assign(g,P(w)),g.id?D.value="修改数据":D.value="添加数据"},U=v(null),M=()=>{U.value.validate().then(w=>{Ne({...g}).then(i=>{let d=g.id?"修改成功":"添加成功";Y.success(d),E.value=!1,p("ok")})})};function P(w){const i={};for(let d in w)if(w.hasOwnProperty(d)){const _=w[d];!isNaN(Number(_))&&typeof _=="string"&&_!=""?i[d]=Number(_):i[d]=_}return i}return x({show:q}),(w,i)=>{const d=fe,_=Oe,R=Ce,N=Ge,B=we,J=me,l=re,o=K;return u(),k("div",vt,[e(o,{open:E.value,"onUpdate:open":i[0]||(i[0]=t=>E.value=t),title:D.value,onOk:M,width:580,bodyStyle:{"max-height":"590px","overflow-y":"auto",width:"calc(100% + 24px)","padding-right":"32px"},class:"add-data-sheet-modal"},{default:n(()=>[e(l,{style:{"margin-top":"16px"},model:g,ref_key:"formRef",ref:U,layout:"vertical"},{default:n(()=>[(u(!0),k(Q,null,H(C.value,t=>(u(),V(J,{name:t.name,key:t.id,rules:t.rules},{label:n(()=>[e(_,{gap:4,style:{width:"100%"}},{default:n(()=>[s("div",ht,$(t.name),1),e(d,null,{title:n(()=>[m($(t.description),1)]),default:n(()=>[e(z(xe))]),_:2},1024)]),_:2},1024)]),default:n(()=>[t.type=="boolean"?(u(),V(R,{key:0,checked:g[t.name],"onUpdate:checked":a=>g[t.name]=a,"checked-children":"开","un-checked-children":"关",checkedValue:"true",unCheckedValue:"false"},null,8,["checked","onUpdate:checked"])):t.type=="number"||t.type=="integer"?(u(),V(N,{key:1,style:{width:"100%"},value:g[t.name],"onUpdate:value":a=>g[t.name]=a,valueModifiers:{number:!0},placeholder:"请输入内容"},null,8,["value","onUpdate:value"])):(u(),V(B,{key:2,value:g[t.name],"onUpdate:value":a=>g[t.name]=a,placeholder:"请输入内容"},null,8,["value","onUpdate:value"]))]),_:2},1032,["name","rules"]))),128))]),_:1},8,["model"])]),_:1},8,["open","title","bodyStyle"])])}}},gt=ee(yt,[["__scopeId","data-v-0de1a1fc"]]),bt={__name:"export-modal",setup(c,{expose:x}){const D=Z().query,F=v("导出数据"),I=v(!1),p=X({dates:[],type:1}),O=()=>{I.value=!0,p.type=1,p.dates=[]},C=X({dates:[{validator:async(U,M)=>p.type==2&&!M.length?Promise.reject("请选择导出日期"):Promise.resolve()}]}),r=re.useForm,{resetFields:L,validate:E,validateInfos:g}=r(p,C),q=()=>{E().then(()=>{let U={form_id:D.form_id};p.type==2&&(U.start_date=p.dates[0],U.end_date=p.dates[1]),Re(U),I.value=!1})};return x({show:O}),(U,M)=>{const P=Me,w=$e,i=me,d=He,_=re,R=K;return u(),k("div",null,[e(R,{open:I.value,"onUpdate:open":M[2]||(M[2]=N=>I.value=N),title:F.value,onOk:q,width:450},{default:n(()=>[e(_,{class:"mt16",layout:"vertical"},{default:n(()=>[e(i,{label:""},{default:n(()=>[e(w,{value:p.type,"onUpdate:value":M[0]||(M[0]=N=>p.type=N),name:"radioGroup"},{default:n(()=>[e(P,{value:1},{default:n(()=>[m("全部数据")]),_:1}),e(P,{value:2},{default:n(()=>[m("自定义日期")]),_:1})]),_:1},8,["value"])]),_:1}),ue(e(i,De({required:"",label:"选择导出日期"},z(g).dates),{default:n(()=>[e(d,{style:{width:"100%"},value:p.dates,"onUpdate:value":M[1]||(M[1]=N=>p.dates=N),valueFormat:"YYYY-MM-DD",format:"YYYY-MM-DD"},null,8,["value"])]),_:1},16),[[de,p.type==2]])]),_:1})]),_:1},8,["open","title"])])}}},kt=ee(bt,[["__scopeId","data-v-ca624632"]]),wt=c=>(_e("data-v-81eb5a66"),c=c(),pe(),c),xt={class:"add-data-sheet"},Ot=wt(()=>s("div",{class:"form-required-item"},"筛选条件",-1)),Ct={class:"filter-list-box"},Mt={style:{"margin-left":"48px"}},$t={__name:"add-filter-modal",props:{column:{type:Array,default:()=>[]}},emits:["ok"],setup(c,{expose:x,emit:S}){const D=v("添加分类"),I=Z().query,p=S,O=c;v([]);const C=v(!1),r=X({form_id:I.form_id,name:"",condition:[],type:"1",id:""}),L=()=>{let l=[{form_field_id:O.column[0].id,form_filed_type:O.column[0].type,rule:void 0,rule_value1:"",rule_value2:""}];r.condition=l},E=l=>{r.condition.splice(l,1)},g=(l,o)=>{l.rule=void 0,l.rule_value1="",l.rule_value2="",l.form_filed_type=O.column.filter(t=>t.id==l.form_field_id)[0].type},q=(l,o)=>o.form_field_id==l.id?!1:r.condition.map(a=>a.form_field_id).includes(l.id),U=()=>{let l=r.condition.map(t=>t.form_field_id),o=O.column.filter(t=>!l.includes(t.id));if(!o.length){Y.error("字段已全部添加");return}r.condition.push({form_field_id:o[0].id,form_filed_type:o[0].type,rule:void 0,rule_value1:"",rule_value2:""})},M=l=>!l.rule||l.form_filed_type=="boolean"?!1:["eq","neq","contain","not_contain","gt","lt","gte","lte","eq","between"].includes(l.rule),P=l=>!l.rule||l.form_filed_type=="boolean"?!1:["between"].includes(l.rule),w=(l,o,t)=>new Promise((a,f)=>M(t)?o?t.form_filed_type=="integer"?Number.isInteger(+o)?a():f("请输入整数"):t.form_filed_type=="number"?he(o)?a():f("请输入数字"):a():f("请输入"):a()),i=(l,o,t)=>new Promise((a,f)=>P(t)?o?t.form_filed_type=="integer"?Number.isInteger(+o)?+o<+t.rule_value1?f("右边的值需要大于左边的值"):a():f("请输入整数"):t.form_filed_type=="number"?he(o)?+o<+t.rule_value1?f("右边的值需要大于左边的值"):a():f("请输入数字"):a():f("请输入"):a()),d=()=>{C.value=!0,D.value="添加分类",L(),r.name="",r.type="1",r.id=""},_=l=>{C.value=!0,D.value="编辑分类",Te({form_id:I.form_id,id:l.id}).then(o=>{let t=o.data.conditions||"[]";t=JSON.parse(t),t=t.map(a=>({form_field_id:a.form_field_id+"",form_filed_type:O.column.filter(f=>f.id==a.form_field_id)[0].type,rule:R(a.rule),rule_value1:a.rule_value1,rule_value2:a.rule_value2})),r.condition=t,r.name=o.data.name,r.type=o.data.type,r.id=o.data.id})};function R(l){const o=["string_","integer_","number_","boolean_"];for(const t of o)if(l.startsWith(t))return l.slice(t.length);return l}const N=v(null),B=()=>{N.value.validate().then(l=>{let o=r.condition.map(T=>({form_field_id:+T.form_field_id,rule:T.form_filed_type+"_"+T.rule,rule_value1:T.rule_value1,rule_value2:T.rule_value2})),t={...r,condition:JSON.stringify(o)},a=Pe,f="添加成功";r.id&&(a=Ae,f="编辑成功"),a(t).then(T=>{Y.success(f),C.value=!1,p("ok")})}).catch(l=>{})},J=v({string:[{label:"是",value:"eq"},{label:"不是",value:"neq"},{label:"包含",value:"contain"},{label:"不包含",value:"not_contain"},{label:"为空",value:"empty"},{label:"不为空",value:"not_empty"}],integer:[{label:"大于",value:"gt"},{label:"小于",value:"lt"},{label:"大于等于",value:"gte"},{label:"小于等于",value:"lte"},{label:"等于",value:"eq"},{label:"介于",value:"between"}],number:[{label:"大于",value:"gt"},{label:"小于",value:"lt"},{label:"大于等于",value:"gte"},{label:"小于等于",value:"lte"},{label:"等于",value:"eq"},{label:"介于",value:"between"}],boolean:[{label:"是",value:"true"},{label:"不是",value:"false"}]});return x({show:d,edit:_}),(l,o)=>{const t=we,a=me,f=We,T=Xe,ne=Ze,se=ke,oe=Me,ie=$e,ae=re,j=K;return u(),k("div",xt,[e(j,{open:C.value,"onUpdate:open":o[2]||(o[2]=b=>C.value=b),title:D.value,onOk:B,width:790},{default:n(()=>[e(ae,{class:"form-box",style:{"margin-top":"16px"},model:r,ref_key:"filterFormRef",ref:N,layout:"vertical"},{default:n(()=>[e(a,{label:"分类名称",name:"name",rules:[{required:!0,message:"请输入分类名称"}]},{default:n(()=>[e(t,{maxLength:64,value:r.name,"onUpdate:value":o[0]||(o[0]=b=>r.name=b),placeholder:"请输入分类名称"},null,8,["value"])]),_:1}),Ot,s("div",Ct,[(u(!0),k(Q,null,H(r.condition,(b,A)=>(u(),V(ne,{key:A,style:{display:"flex","margin-bottom":"8px"},align:"baseline"},{default:n(()=>[s("div",null,"条件"+$(A+1)+":",1),e(a,null,{default:n(()=>[e(T,{value:b.form_field_id,"onUpdate:value":h=>b.form_field_id=h,style:{width:"150px"},placeholder:"请选择",onChange:h=>g(b,A)},{default:n(()=>[(u(!0),k(Q,null,H(O.column,h=>(u(),V(f,{disabled:q(h,b),key:h.id,value:h.id},{default:n(()=>[m($(h.name),1)]),_:2},1032,["disabled","value"]))),128))]),_:2},1032,["value","onUpdate:value","onChange"])]),_:2},1024),e(a,{name:["condition",A,"rule"],rules:{required:!0,message:"请选择规则"}},{default:n(()=>[e(T,{value:b.rule,"onUpdate:value":h=>b.rule=h,style:{width:"120px"},placeholder:"请选择规则"},{default:n(()=>[(u(!0),k(Q,null,H(J.value[b.form_filed_type],h=>(u(),V(f,{key:h.value,value:h.value},{default:n(()=>[m($(h.label),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value"])]),_:2},1032,["name"]),ue(e(a,{name:["condition",A,"rule_value1"],rules:{asyncValidator:(h,W)=>w(h,W,b)}},{default:n(()=>[e(t,{value:b.rule_value1,"onUpdate:value":h=>b.rule_value1=h,placeholder:"请输入"},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"]),[[de,M(b)]]),ue(e(a,{name:["condition",A,"rule_value2"],rules:{asyncValidator:(h,W)=>i(h,W,b),trigger:"blur"}},{default:n(()=>[e(t,{value:b.rule_value2,"onUpdate:value":h=>b.rule_value2=h,placeholder:"请输入"},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"]),[[de,P(b)]]),r.condition.length>1?(u(),V(z(ft),{key:0,onClick:h=>E(A)},null,8,["onClick"])):le("",!0)]),_:2},1024))),128)),s("div",Mt,[e(se,{onClick:U},{default:n(()=>[m("添加条件")]),_:1})])]),e(a,{label:"条件之间关系",required:""},{default:n(()=>[e(ie,{value:r.type,"onUpdate:value":o[1]||(o[1]=b=>r.type=b)},{default:n(()=>[e(oe,{value:"1"},{default:n(()=>[m("与（And）")]),_:1}),e(oe,{value:"2"},{default:n(()=>[m("或（Or）")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}},Se=ee($t,[["__scopeId","data-v-81eb5a66"]]),te=c=>(_e("data-v-f1db0fc5"),c=c(),pe(),c),Ft={class:"custom-table"},St=te(()=>s("div",{class:"t-head"},[s("div",{class:"td"},[s("div",{style:{width:"24px"}}),m(" 分类名称 ")]),s("div",{class:"td"},"类型"),s("div",{class:"td"},"启用分类"),s("div",{class:"td flex-none",style:{width:"120px"}},"操作")],-1)),It={class:"t-body"},qt={class:"t-row"},Ut=te(()=>s("div",{class:"t-item"},[s("div",{style:{width:"24px"}}),m(" 全部 ")],-1)),Dt=te(()=>s("div",{class:"t-item"},"系统分类",-1)),Et={class:"t-item"},Nt=te(()=>s("div",{class:"t-item flex-none",style:{width:"120px"}},null,-1)),Rt={class:"t-item"},Tt={class:"drag-btn"},Pt={key:0},At={key:1},Vt=te(()=>s("div",{class:"t-item"},"自定义分类",-1)),zt={class:"t-item"},Lt={class:"t-item flex-none",style:{width:"120px"}},Bt=["onClick"],Yt=["onClick"],Jt={__name:"filter-manage-modal",props:{column:{type:Array,default:()=>[]}},emits:["ok","change"],setup(c,{expose:x,emit:S}){const F=Z().query,I=S,p=v("管理分类"),O=v(!1),C=c,r=()=>{be({form_id:F.form_id}).then(d=>{q.value=d.data.map(_=>({..._}))})},L=()=>{r(),I("ok"),I("change")},E=()=>{r(),O.value=!0},g=()=>{O.value=!1},q=v(),U=()=>{let d=[];q.value.reverse().forEach((_,R)=>{d.push({id:+_.id,sort:+R+1})}),Ve({form_id:F.form_id,filter_sort:JSON.stringify(d)}).then(_=>{Y.success("排序成功"),r(),I("change")})},M=d=>{ze({form_id:F.form_id,id:d.id,enabled:d.enabled=="true"?"false":"true"}).then(_=>{Y.success("设置成功"),r(),I("change")})},P=(d,_)=>{K.confirm({title:"删除确认",icon:e(ce),content:"确认删除该分类?",okText:"确 定",okType:"danger",cancelText:"取 消",onOk(){Le({id:d.id,form_id:F.form_id}).then(R=>{Y.success("删除成功"),q.value.splice(_,1),I("change")})},onCancel(){}})},w=v(null),i=d=>{w.value.edit(d)};return x({show:E}),(d,_)=>{const R=Ce,N=je,B=fe,J=Fe,l=K;return u(),k("div",null,[e(l,{open:O.value,"onUpdate:open":_[1]||(_[1]=o=>O.value=o),title:p.value,onCancel:g,footer:null,width:760},{default:n(()=>[s("div",Ft,[St,s("div",It,[s("div",qt,[Ut,Dt,s("div",Et,[e(R,{checked:!0,disabled:"","checked-children":"开","un-checked-children":"关"})]),Nt]),e(z(tt),{modelValue:q.value,"onUpdate:modelValue":_[0]||(_[0]=o=>q.value=o),"item-key":"id",onEnd:U,group:"table-rows",handle:".drag-btn"},{item:n(({element:o,index:t})=>[(u(),k("div",{key:o.id,class:"t-row"},[s("div",Rt,[s("span",Tt,[e(N,{name:"drag"})]),o.name.length>10?(u(),k("span",Pt,[e(B,null,{title:n(()=>[m($(o.name),1)]),default:n(()=>[m(" "+$(o.name.slice(0,10)+"..."),1)]),_:2},1024)])):(u(),k("span",At,$(o.name),1))]),Vt,s("div",zt,[e(R,{onChange:a=>M(o),checked:o.enabled,"checked-children":"开","un-checked-children":"关",checkedValue:"true",unCheckedValue:"false"},null,8,["onChange","checked"])]),s("div",Lt,[s("a",{onClick:a=>i(o)},"编辑",8,Bt),e(J,{type:"vertical"}),s("a",{onClick:a=>P(o,t)},"删除",8,Yt)])]))]),_:1},8,["modelValue"])])])]),_:1},8,["open","title"]),e(Se,{onOk:L,column:C.column,ref_key:"addFilrerModalRef",ref:w},null,8,["column"])])}}},Qt=ee(Jt,[["__scopeId","data-v-f1db0fc5"]]),Ie=c=>(_e("data-v-b2a46eb6"),c=c(),pe(),c),Kt={key:0,class:"loading-box"},jt={key:1,class:"empty-box"},Gt=Ie(()=>s("img",{src:qe,alt:""},null,-1)),Ht=Ie(()=>s("div",null,"暂无字段, 请先去添加字段",-1)),Wt=[Gt,Ht],Xt={key:2,class:"field-manage-page"},Zt={class:"page-title"},en={key:0},tn={key:1},nn={class:"table-wrapper customize-scroll-style"},on={key:0},an={key:1},ln={key:0},rn={key:1},sn=["onClick"],un=["onClick"],dn={__name:"index",setup(c){const x=nt(),S=Ee(()=>x.databaseInfo.entry_count),F=Z().query,I=v([]),p=v([]),O=v(!0),C=X({form_id:F.form_id,page:1,size:10,total:0}),r=v(!1),L=t=>{C.page=t.current,C.size=t.pageSize,E()},E=()=>{r.value=!0,Ye({...C,filter_id:q.value}).then(t=>{I.value=t.data.list||[],C.total=+t.data.total||0,x.getDatabaseInfo({id:F.form_id})}).finally(()=>{r.value=!1})};Be({form_id:F.form_id}).then(t=>{p.value=t.data,O.value=!1,E()});const g=v([]),q=v(""),U=()=>{be({form_id:F.form_id}).then(t=>{let a=t.data||[];if(g.value=a.filter(f=>f.enabled=="true"),q.value){let f=a.filter(T=>T.id==q.value);(f.length&&f[0].enabled=="false"||!f.length)&&(q.value="",E())}})};U();const M=()=>{U(),E()},P=()=>{C.page=1,E()},w=v(null),i=(t,a)=>{a==="add"&&w.value.show()},d=t=>{K.confirm({title:"删除确认",icon:e(ce),content:"删除后不可恢复，确认删除这条数据吗?",okText:"确 定",okType:"danger",cancelText:"取 消",onOk(){Je({id:t.id}).then(a=>{Y.success("删除成功"),M()})},onCancel(){}})},_=()=>{K.confirm({title:"清空数据提示",icon:e(ce),content:"数据清空后将无法恢复，确认清空数据吗？",okText:"清 空",okType:"danger",cancelText:"取 消",onOk(){Qe({form_id:F.form_id}).then(t=>{Y.success("清空成功"),M()})},onCancel(){}})},R=v(null),N=(t={})=>{R.value.show(JSON.parse(JSON.stringify(t)))},B=v(null),J=()=>{B.value.show()},l=v(null),o=()=>{l.value.show()};return(t,a)=>{const f=lt,T=ke,ne=rt,se=st,oe=it,ie=Oe,ae=at,j=fe,b=ot,A=dt,h=Fe,W=ut;return u(),k(Q,null,[O.value?(u(),k("div",Kt,[e(f)])):le("",!0),!O.value&&!p.value.length?(u(),k("div",jt,Wt)):le("",!0),!O.value&&p.value.length?(u(),k("div",Xt,[s("div",Zt,[m(" 数据管理 "),e(ie,{gap:16},{default:n(()=>[e(T,{type:"primary",onClick:a[0]||(a[0]=y=>N())},{icon:n(()=>[e(z(ye))]),default:n(()=>[m(" 添加数据 ")]),_:1}),e(oe,null,{overlay:n(()=>[e(se,null,{default:n(()=>[e(ne,{key:"1"},{default:n(()=>[s("div",{onClick:J},"导出数据")]),_:1}),e(ne,{key:"2"},{default:n(()=>[s("div",{onClick:_},"清空数据")]),_:1})]),_:1})]),default:n(()=>[e(T,null,{default:n(()=>[m(" 更多操作 "),e(z(ct))]),_:1})]),_:1})]),_:1})]),e(b,{class:"tabs-wrapper",activeKey:q.value,"onUpdate:activeKey":a[1]||(a[1]=y=>q.value=y),type:"editable-card",onEdit:i,onChange:P},{addIcon:n(()=>[e(z(ye)),m(" 添加分类 ")]),rightExtra:n(()=>[s("span",{class:"setting-btn",onClick:o},[e(z(et)),m(" 管理分类 ")])]),default:n(()=>[e(ae,{key:"",closable:!1},{tab:n(()=>[m("全部 ("+$(S.value)+")",1)]),_:1}),(u(!0),k(Q,null,H(g.value,y=>(u(),V(ae,{key:y.id,closable:!1},{tab:n(()=>[y.name.length>8?(u(),k("span",en,[e(j,null,{title:n(()=>[m($(y.name),1)]),default:n(()=>[m(" "+$(y.name.slice(0,8)+"..."),1)]),_:2},1024)])):(u(),k("span",tn,$(y.name),1)),m(" ("+$(y.entry_count)+")",1)]),_:2},1024))),128))]),_:1},8,["activeKey"]),s("div",nn,[e(W,{sticky:"","data-source":I.value,loading:r.value,scroll:{x:1e3},pagination:{current:C.page,total:C.total,pageSize:C.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:L},{default:n(()=>[(u(!0),k(Q,null,H(p.value,y=>(u(),V(A,{key:y.name,"data-index":y.name,width:165},{title:n(()=>[y.name.length>12?(u(),k("span",on,[e(j,null,{title:n(()=>[m($(y.name),1)]),default:n(()=>[m(" "+$(y.name.slice(0,12)+"..."),1)]),_:2},1024)])):(u(),k("span",an,$(y.name),1)),e(j,null,{title:n(()=>[m($(y.description),1)]),default:n(()=>[e(z(xe),{style:{"margin-left":"2px"}})]),_:2},1024)]),default:n(({record:G})=>[G[y.name].length>10?(u(),k("span",ln,[e(j,null,{title:n(()=>[m($(G[y.name]),1)]),default:n(()=>[m(" "+$(G[y.name].slice(0,9)+"..."),1)]),_:2},1024)])):(u(),k("span",rn,$(G[y.name]||"-"),1))]),_:2},1032,["data-index"]))),128)),e(A,{key:"action",title:"操作",width:120,fixed:"right"},{default:n(({record:y})=>[s("span",null,[s("a",{onClick:G=>N(y)},"编辑",8,sn),e(h,{type:"vertical"}),s("a",{onClick:G=>d(y)},"删除",8,un)])]),_:1})]),_:1},8,["data-source","loading","pagination"])]),e(gt,{onOk:M,column:p.value,ref_key:"addDataModalRef",ref:R},null,8,["column"]),e(Se,{onOk:M,column:p.value,ref_key:"addFilrerModalRef",ref:w},null,8,["column"]),e(kt,{ref_key:"exportModalRef",ref:B},null,512),e(Qt,{onOk:E,onChange:U,column:p.value,ref_key:"filterManageModalRef",ref:l},null,8,["column"])])):le("",!0)],64)}}},_o=ee(dn,[["__scopeId","data-v-b2a46eb6"]]);export{_o as default};
